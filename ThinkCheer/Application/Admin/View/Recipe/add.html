<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>添加菜谱</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> <link href="__PUBLIC__/back/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="__PUBLIC__/back/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="__PUBLIC__/back/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="__PUBLIC__/back/css/animate.css" rel="stylesheet">
    <link href="__PUBLIC__/back/css/style.css?v=4.1.0" rel="stylesheet">
    <link href="__PUBLIC__/back/css/fileinput.css" rel="stylesheet" >
    <link href="__PUBLIC__/back/css/luxiaojia.css" rel="stylesheet" >
    <link href="__PUBLIC__/back/css/default.css" rel="stylesheet">
    <link href="__PUBLIC__/back/css/Lobibox.min.css" rel="stylesheet">

</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>添加菜谱</h5>
                    </div>
                    <div class="ibox-content">
                        <form method="post" class="form-horizontal" action="__MODULE__/Recipe/doAdd" enctype="multipart/form-data" id="myform" onsubmit="return mySubmit(true)">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜名</label>

                                <div class="col-sm-9">
                                    <input type="text" class="form-control" name="recipename" id="recipename">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">标签</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">用料</label>

                                <div class="col-sm-5">
                                    <input type="text" class="form-control" placeholder="食材" name="foodname[]">
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control" placeholder="数量" name="foodnum[]">
                                </div>
                                <div class="addAndRemove" id="addFood">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">做法</label>

                                <div class="col-sm-7">
                                    <textarea name="step[]" id="" rows="7" class="form-control" placeholder="步骤"></textarea>
                                </div>
                                <div class="col-sm-2">
                                    <div class="control-group js_uploadBox">
                                        <div class="btn-upload">
                                          <a href=""><i class="icon-upload"></i><span class="js_uploadText">上传</span>图片</a>
                                          <input class="js_upFile" type="file" name="img[]">
                                        </div>
                                        <div class="js_showBox "><img class="js_logoBox" src="__PUBLIC__/back/img/add.png" width="100px" ></div>
                                    </div>
                                </div>
                                <div class="addAndRemove" id="addProcedure">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">闹钟</label>
                                <div class="col-sm-5">
                                    <input type="text" class="form-control" placeholder="第几步，请输入数字" name="clocknum[]">
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control" name="clocktime[]" placeholder="时间">
                                </div>
                                <div class="addAndRemove" id="addClock">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </div>
                            </div>
                            <!--上传图片-->
                            <!-- <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">图片</label>

                                <div class="col-sm-9">
                                    <input id="file-1" type="file" multiple class="file" data-overwrite-initial="false" data-min-file-count="2" name="img">
                                    <span class="help-block m-b-none">请上传所有步骤的图片，按ctrl多图片上传</span>
                                </div>
                            </div> -->
                            <div class="hr-line-dashed"></div>
                            <div class="form-group Center">
                                <button class="btn btn-primary" type="submit" id="basicError">保存内容</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 全局js -->
    <script src="__PUBLIC__/back/js/jquery.min.js?v=2.1.4"></script>
    <script src="__PUBLIC__/back/js/bootstrap.min.js?v=3.3.6"></script>   

    <!-- 自定义js -->
    
    <script src="__PUBLIC__/back/js/content.js?v=1.0.0"></script>
    <script src="__PUBLIC__/back/js/luxiaojia.js"></script>
    <script src="__PUBLIC__/back/js/jquery.uploadView.js"></script>
    <script src="__PUBLIC__/back/js/lobibox.min.js"></script>
    <script>
    function mySubmit(flag){
        return flag;
    }

    $(function(){
        $('#basicError').click(function () {
            if ($("#recipename").val() == "") {
                Lobibox.notify('error', {
                    msg: '菜名不能为空'
                });

            }
            if ($("input[type='file']").val() == "") {
                Lobibox.notify('error', {
                    msg: '请上传步骤图'
                });
            }

            $("#myform").submit(function(){
                if ($("#recipename").val() == "" || $("input[type = 'file']").val() == "") {
                    return mySubmit(false);
                }
                else{
                    return mySubmit(true);
                }
            });
        });
    });
    </script>
    


    <!-- iCheck -->
    <script src="__PUBLIC__/back/js/plugins/iCheck/icheck.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-green',
                radioClass: 'iradio_square-green',
            });
        });
    </script>
    <script>
        $(".js_upFile").uploadView({
            uploadBox: '.js_uploadBox',//设置上传框容器
            showBox : '.js_showBox',//设置显示预览图片的容器
            width : 100, //预览图片的宽度，单位px
            height : 100, //预览图片的高度，单位px
            allowType: ["gif", "jpeg", "jpg", "bmp", "png"], //允许上传图片的类型
            maxSize :20, //允许上传图片的最大尺寸，单位M
            success:function(e){
                $(".js_uploadText").text('更改');
            }
        });
    </script>
</body>

</html>
