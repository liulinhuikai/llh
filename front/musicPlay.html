<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>My App</title>
  <!-- Path to Framework7 Library CSS-->
  <link rel="stylesheet" href="css/framework7.ios.min.css">
  <link rel="stylesheet" href="css/framework7.ios.colors.min.css">
  <link rel="stylesheet" href="css/fa-svg-with-js.css">
  <!-- Path to your custom app styles-->
  <link rel="stylesheet" href="css/style.css">
  <script type="text/javascript" src="js/jquery-2.2.2.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      //获取audio元素
      var audio = document.getElementById("audios");
      //当前音乐地址

      //audio oncanplay事件
      audio.addEventListener("canplay", function(){
        var total = audio.duration;

        //自动播放设置
        audio.play();

        var timer = setInterval(function(){
            var now = audio.currentTime;

            //播放进度随时显示
            var progress = now/total;
            var width = progress*($("#rateSpace").width());

            $("#musicRate").css('width',parseInt(width));
            //播放时间的提示更新
            var totalTime = (total/60).toFixed(2);
            var nowTime = (now/60).toFixed(2);
            $('#starTime').text(nowTime);
            $('#endTime').text(totalTime);
        },1000);

      });
      console.log(audio.duration);//自动加载不显示时长

      //2、单击audio控制区域的播放或暂停按钮，可以进行视频的播放或暂停  注意：这部分代码不能在oncanplay监听事件中，否则无效
      $("#playP").click(function(){
        console.log(audio.duration);//点击可显示时长
        var icon = $("#playP svg").attr("class");
          
        if (audio.paused ){
          console.log(icon);
          $("#playP svg").attr("class","svg-inline--fa fa-pause fa-w-14 fa-2x");
          audio.play();
        }else{
          console.log(icon);
          $("#playP svg").attr("class","svg-inline--fa fa-play fa-w-14 fa-2x");
          audio.pause();
        }
      });

      //切歌设置
      $("#nextm").click(function(){
        
      });

        //自动播放设置
        // if (audio.paused ){
        //   $("#playP i").attr("class","fas fa-pause fa-2x");
        //   audio.play();
        // }else{
        //   $("#playP i").attr("class","fas fa-play fa-2x");
        //   audio.pause();
        // }


        // console.log(icon);
        // if (icon == "svg-inline--fa fa-play fa-w-14 fa-2x") {
        //   $("#playP svg").attr("class","svg-inline--fa fa-pause fa-w-14 fa-2x");
        //   audio.play();
        // }else{
        //   $("#playP svg").attr("class","svg-inline--fa fa-play fa-w-14 fa-2x");
        //   audio.pause();
        // }正确做法
        // alert($("#playP svg").hasClass("svg-inline--fa fa-play fa-w-14 fa-2x"));

        // 出现的问题这样为undefined
        // if($("#playP i").hasClass("fas fa-play fa-2x")){
        //   $("#playP i").attr("class","fas fa-pause fa-2x");
        //   audio.play();
        // }else{
        //   audio.play();
        // }

        //收藏心操作
        $(".heartbtn").click(function(){
          var heartbtn = $(".heartbtn svg").attr("data-prefix");
          if (heartbtn == "far") {
            $(".heartbtn svg").attr("data-prefix","fas");
            $(".heartbtn svg").attr("style","color:Tomato");
          }else{
            $(".heartbtn svg").attr("data-prefix","far");
            $(".heartbtn svg").attr("style","color:#424242");
          }
        });
     });
  </script>
</head>
<body>
	<!-- Status bar overlay for fullscreen mode-->
    <div class="statusbar-overlay"></div>
    <!-- Views-->
    <div class="views whiteBGColor">
      <!-- Your main view, should have "view-main" class-->
      <div class="view view-main whiteBGColor">
        <!-- Top Navbar-->
        <div class="navbar whiteBGColor">
          <div class="navbar-inner">
          	<div class="left">
          		<a href="javascript:history.go(-1)" class="external blackColor"><i class="fas fa-angle-left fa-lg"></i></a>
          	</div>
            <div class="center row">
            	<div class="row">Rolling in the deep&nbsp;</div>

            	<div class="row font16 grayColor"> -- Adele</div>
            </div>
            <div class="right">
            </div>
          </div>
        </div>
        <div class="pages navbar-through toolbar-through whiteBGColor">
	        <div class="page-content">
	        	<!-- 音乐封面 -->
		        <div class="row" style="padding-top:16%">
		        	<div class="col-10"></div>
		        	<div class="col-80">
		        		<img src="img/Adele.jpg" width="100%">
		        	</div>
		        	<div class="col-10"></div>
		        </div>
            <div class="row no-gutte">
              <!-- 播放进度-->
              <!-- <div class="col-5"></div> -->
              <div class="col-15 font11" id="starTime" style="text-align:right">00:00</div>
              <div class="col-70">
                <!-- <div id="rateId"></div> -->
                <div id="rateSpace">
                  <div id="musicRate"></div>
                </div>
              </div>
              <div class="col-15 font11" id="endTime">00:00</div>
              <!-- <div class="col-5"></div> -->
              <!-- 播放进度结束-->
            </div>
        
		        <!-- 播放控制区 -->
            <div class="row" style="padding-top:12%">
              <div class="col-20 textCenter">
                <a href="" class="heartbtn">
                  <i class="far fa-heart fa-2x" style="color:#424242"></i>
                </a>
              </div>
              <div class="col-20 textCenter">
                <a href="" id="prem">
                  <i class="fas fa-step-backward fa-2x" style="color:#424242"></i>
                </a>
              </div>
              <div class="col-20 textCenter">
                <a href="#" id="playP">
                  <i class="fas fa-pause fa-2x" style="color:#424242"></i>
                </a>
              </div>
              <div class="col-20 textCenter">
                <a href="" id="nextm">
                  <i class="fas fa-step-forward fa-2x " style="color:#424242"></i>
                </a>
              </div>
              <div class="col-20 textCenter">
                <a href="#" data-picker=".picker-1" class="open-picker">
                  <i class="fas fa-list fa-2x " style="color:#424242"></i>
                </a>
              </div>
            </div>
		        <div class="row" style="padding-top:8%">
		        	<audio id="audios1" src="music/Adele-Rolling In The Deep.mp3" loop="loop"></audio><br/> 
              <audio id="audios" src="music/脸红的思春期-Some1.mp3" loop="loop"></audio><br/> 
		        </div>
            
		        <!-- 播放控制区 End-->
	      </div>
	        
	    </div>
	  </div>
	</div>
  <!-- 音乐列表Picker -->
  <div class="picker-modal picker-1">
    <div class="toolbar">
      <div class="toolbar-inner">
        <div class="left"></div>
        <div class="right"><a href="#" class="close-picker redColor">关闭</a></div>
      </div>
    </div>
    <div class="picker-modal-inner whiteBGColor" style="margin-top:-35px;">
    <!-- <div class="page-content">该class标签使以下页面可滚动，将该标签写在list-block下可免去页面下方的留白 -->
      <div class="page-content list-block media-list inset">
        <ul>
          <li>
            <a href="#" class="item-link item-content">
              <div class="item-media"><img src="img/iu.jpg" width="44" height="44"></div>
              <div class="item-inner">
                <div class="item-title-row">
                  <div class="item-title">致姓名</div>
                </div>
                <div class="item-subtitle">iu(李智恩)</div>
              </div>
            </a>
          </li>
          <li>
            <a href="#" class="item-link item-content">
              <div class="item-media"><img src="img/Adele.jpg" width="44" height="44"></div>
              <div class="item-inner">
                <div class="item-title-row">
                  <div class="item-title">Set Fire to the Rain</div>
                </div>
                <div class="item-subtitle">Adele</div>
              </div>
            </a>
          </li><li>
            <a href="#" class="item-link item-content">
              <div class="item-media"><img src="img/poster.jpg" width="44" height="44"></div>
              <div class="item-inner">
                <div class="item-title-row">
                  <div class="item-title">小幸运</div>
                </div>
                <div class="item-subtitle">田馥甄</div>
              </div>
            </a>
          </li>
          <li>
            <a href="#" class="item-link item-content">
              <div class="item-media"><img src="img/iu.jpg" width="44" height="44"></div>
              <div class="item-inner">
                <div class="item-title-row">
                  <div class="item-title">歌名</div>
                </div>
                <div class="item-subtitle">歌手名s</div>
              </div>
            </a>
          </li>
          <li>
            <a href="#" class="item-link item-content">
              <div class="item-media"><img src="..." width="44"></div>
              <div class="item-inner">
                <div class="item-title-row">
                  <div class="item-title">Yellow Submarine</div>
                </div>
                <div class="item-subtitle">Beatles</div>
              </div>
            </a>
          </li>
        </ul>
      </div> 
    </div>
  </div>
  <!-- 音乐列表Picker end -->
<!-- Path to Framework7 Library JS-->    
  <script type="text/javascript" src="js/framework7.min.js"></script>
  <script type="text/javascript" src="js/fontawesome-all.min.js"></script>
  <script>var myApp = new Framework7();            </script>
</body>
</html>